#
#  Circle CI > Heroku
#  deploy /build folder
#
#

machine:
  timezone: Asia/Tokyo

checkout:
  post:
    - git clone https://github.com/nulltask/heroku-static-provider build

dependencies:
  pre:
    - go get -v github.com/spf13/hugo

deployment:
  production:
    branch: master
    commands:
      - hugo version
      - hugo
      - cp -r public/* build/public/
      - cd build
      - git config --global user.name ${HEROKU_USER}
      - git config --global user.email ${HEROKU_USER_EMAIL}
      - git add -A *
      - git commit -am "Deploy"
      - git push git@heroku.com:lower-poppy-5174.git -f $CIRCLE_SHA1:refs/heads/master
